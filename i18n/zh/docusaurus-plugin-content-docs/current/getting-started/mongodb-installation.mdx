# ğŸƒ MongoDB ç¤¾åŒºç‰ˆå®‰è£…æŒ‡å—

æœ¬æŒ‡å—æ¶µç›–äº†åœ¨ä¸åŒ Linux å‘è¡Œç‰ˆä¸Šå®‰è£… MongoDB ç¤¾åŒºç‰ˆçš„æ–¹æ³•ã€‚

:::info å‰ç½®æ¡ä»¶
- ç³»ç»Ÿçš„ root æˆ– sudo è®¿é—®æƒé™
- å¯ç”¨çš„ç½‘ç»œè¿æ¥
- Ubuntu 18.04+ æˆ– Debian 10+ ç³»ç»Ÿ
:::

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

<Tabs>
<TabItem value="ubuntu" label="Ubuntu" default>

## ğŸ§ åœ¨ Ubuntu ä¸Šå®‰è£… MongoDB ç¤¾åŒºç‰ˆ

### ğŸ” 1. å¯¼å…¥åŒ…ç®¡ç†ç³»ç»Ÿä½¿ç”¨çš„å…¬é’¥

```bash
curl -fsSL https://www.mongodb.org/static/pgp/server-7.0.asc | \
   sudo gpg -o /usr/share/keyrings/mongodb-server-7.0.gpg \
   --dearmor
```

### ğŸ“ 2. åˆ›å»º MongoDB çš„åˆ—è¡¨æ–‡ä»¶

Ubuntu 22.04 (Jammy):
```bash
echo "deb [ arch=amd64,arm64 signed-by=/usr/share/keyrings/mongodb-server-7.0.gpg ] https://repo.mongodb.org/apt/ubuntu jammy/mongodb-org/7.0 multiverse" | sudo tee /etc/apt/sources.list.d/mongodb-org-7.0.list
```

Ubuntu 20.04 (Focal):
```bash
echo "deb [ arch=amd64,arm64 signed-by=/usr/share/keyrings/mongodb-server-7.0.gpg ] https://repo.mongodb.org/apt/ubuntu focal/mongodb-org/7.0 multiverse" | sudo tee /etc/apt/sources.list.d/mongodb-org-7.0.list
```

Ubuntu 18.04 (Bionic):
```bash
echo "deb [ arch=amd64,arm64 signed-by=/usr/share/keyrings/mongodb-server-7.0.gpg ] https://repo.mongodb.org/apt/ubuntu bionic/mongodb-org/7.0 multiverse" | sudo tee /etc/apt/sources.list.d/mongodb-org-7.0.list
```

### ğŸ”„ 3. é‡æ–°åŠ è½½æœ¬åœ°è½¯ä»¶åŒ…æ•°æ®åº“

```bash
sudo apt-get update
```

### ğŸ“¦ 4. å®‰è£… MongoDB è½¯ä»¶åŒ…

å®‰è£…æœ€æ–°ç¨³å®šç‰ˆï¼š
```bash
sudo apt-get install -y mongodb-org
```

å®‰è£…ç‰¹å®šç‰ˆæœ¬ï¼š
```bash
sudo apt-get install -y mongodb-org=7.0.4 mongodb-org-database=7.0.4 mongodb-org-server=7.0.4 mongodb-mongosh=2.1.1 mongodb-org-mongos=7.0.4 mongodb-org-tools=7.0.4
```

### ğŸš€ 5. å¯åŠ¨ MongoDB

```bash
sudo systemctl start mongod
```

### âœ… 6. éªŒè¯ MongoDB æ˜¯å¦æˆåŠŸå¯åŠ¨

```bash
sudo systemctl status mongod
```

### ğŸ” 7. è®¾ç½® MongoDB å¼€æœºè‡ªå¯

```bash
sudo systemctl enable mongod
```

### ğŸ›‘ 8. åœæ­¢ MongoDB

```bash
sudo systemctl stop mongod
```

### â™»ï¸ 9. é‡å¯ MongoDB

```bash
sudo systemctl restart mongod
```

### ğŸ¯ 10. å¼€å§‹ä½¿ç”¨ MongoDB

```bash
mongosh
```

</TabItem>
<TabItem value="debian" label="Debian">

## ğŸŒ€ åœ¨ Debian ä¸Šå®‰è£… MongoDB ç¤¾åŒºç‰ˆ

### ğŸ” 1. å¯¼å…¥åŒ…ç®¡ç†ç³»ç»Ÿä½¿ç”¨çš„å…¬é’¥

```bash
curl -fsSL https://www.mongodb.org/static/pgp/server-7.0.asc | \
   sudo gpg -o /usr/share/keyrings/mongodb-server-7.0.gpg \
   --dearmor
```

### ğŸ“ 2. åˆ›å»º MongoDB çš„åˆ—è¡¨æ–‡ä»¶

Debian 12 (Bookworm):
```bash
echo "deb [ signed-by=/usr/share/keyrings/mongodb-server-7.0.gpg ] https://repo.mongodb.org/apt/debian bookworm/mongodb-org/7.0 main" | sudo tee /etc/apt/sources.list.d/mongodb-org-7.0.list
```

Debian 11 (Bullseye):
```bash
echo "deb [ signed-by=/usr/share/keyrings/mongodb-server-7.0.gpg ] https://repo.mongodb.org/apt/debian bullseye/mongodb-org/7.0 main" | sudo tee /etc/apt/sources.list.d/mongodb-org-7.0.list
```

Debian 10 (Buster):
```bash
echo "deb [ signed-by=/usr/share/keyrings/mongodb-server-7.0.gpg ] https://repo.mongodb.org/apt/debian buster/mongodb-org/7.0 main" | sudo tee /etc/apt/sources.list.d/mongodb-org-7.0.list
```

### ğŸ”„ 3. é‡æ–°åŠ è½½æœ¬åœ°è½¯ä»¶åŒ…æ•°æ®åº“

```bash
sudo apt-get update
```

### ğŸ“¦ 4. å®‰è£… MongoDB è½¯ä»¶åŒ…

å®‰è£…æœ€æ–°ç¨³å®šç‰ˆï¼š
```bash
sudo apt-get install -y mongodb-org
```

å®‰è£…ç‰¹å®šç‰ˆæœ¬ï¼š
```bash
sudo apt-get install -y mongodb-org=7.0.4 mongodb-org-database=7.0.4 mongodb-org-server=7.0.4 mongodb-mongosh=2.1.1 mongodb-org-mongos=7.0.4 mongodb-org-tools=7.0.4
```

### ğŸš€ 5. å¯åŠ¨ MongoDB

```bash
sudo systemctl start mongod
```

### âœ… 6. éªŒè¯ MongoDB æ˜¯å¦æˆåŠŸå¯åŠ¨

```bash
sudo systemctl status mongod
```

### ğŸ” 7. è®¾ç½® MongoDB å¼€æœºè‡ªå¯

```bash
sudo systemctl enable mongod
```

### ğŸ›‘ 8. åœæ­¢ MongoDB

```bash
sudo systemctl stop mongod
```

### â™»ï¸ 9. é‡å¯ MongoDB

```bash
sudo systemctl restart mongod
```

### ğŸ¯ 10. å¼€å§‹ä½¿ç”¨ MongoDB

```bash
mongosh
```

</TabItem>
</Tabs>

## ğŸ—‘ï¸ å¸è½½ MongoDB ç¤¾åŒºç‰ˆ

:::warning æ³¨æ„
è¿™å°†**æ°¸ä¹…åˆ é™¤**æ‰€æœ‰ MongoDB æ•°æ®å’Œé…ç½®æ–‡ä»¶ã€‚è¯·ç¡®ä¿åœ¨ç»§ç»­ä¹‹å‰å¤‡ä»½æ‚¨çš„æ•°æ®ã€‚
:::

è¦å®Œå…¨ä»ç³»ç»Ÿä¸­ç§»é™¤ MongoDBï¼š

```bash
sudo service mongod stop
sudo apt-get purge mongodb-org*
sudo rm -r /var/log/mongodb
sudo rm -r /var/lib/mongodb
```

## ğŸ”§ æ•…éšœæ’é™¤

### âŒ MongoDB æ— æ³•å¯åŠ¨

æ£€æŸ¥æ—¥å¿—æ–‡ä»¶ä¸­çš„é”™è¯¯ï¼š
```bash
sudo cat /var/log/mongodb/mongod.log
```

:::tip
å¸¸è§çš„å¯åŠ¨é—®é¢˜åŒ…æ‹¬ç£ç›˜ç©ºé—´ä¸è¶³ã€ç«¯å£å†²çªæˆ–æƒé™é—®é¢˜ã€‚
:::

### ğŸ”’ æƒé™é—®é¢˜

ç¡®ä¿ MongoDB å…·æœ‰æ­£ç¡®çš„æ‰€æœ‰æƒï¼š
```bash
sudo chown -R mongodb:mongodb /var/lib/mongodb
sudo chown mongodb:mongodb /tmp/mongodb-27017.sock
```

### ğŸšª ç«¯å£å†²çª

æ£€æŸ¥ç«¯å£ 27017 æ˜¯å¦è¢«å ç”¨ï¼š
```bash
sudo netstat -tulpn | grep :27017
```

:::note å…¶ä»–èµ„æº
- [MongoDB æ–‡æ¡£](https://docs.mongodb.com/)
- [MongoDB ç¤¾åŒºè®ºå›](https://developer.mongodb.com/community/forums/)
- [MongoDB å¤§å­¦](https://university.mongodb.com/)
:::